<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.colonb.naafa.hospital.HospitalMapper">

<!--    <resultMap id="User" type="com.colonb.naafa.user.entity.User">-->
<!--        <result property="seq" column="SEQ"/>-->
<!--        <result property="username" column="USERNAME"/>-->
<!--        <result property="password" column="PASSWORD"/>-->
<!--        <result property="provider" column="PROVIDER"/>-->
<!--        <result property="socialId" column="SOCIAL_ID"/>-->
<!--        <result property="role" column="ROLE"/>-->
<!--    </resultMap>-->

    <insert id="insertHospitalOperatingHourMonday">
        INSERT INTO HOSPITAL_BUSINESS_HOURS_MONDAY (ENABLE
                                                    , START_AT
                                                    , END_AT
                                                    , BREAK_START_AT
                                                    , BREAK_END_AT
                                                    , NIGHT_CARE_ENABLE
                                                    , NIGHT_CARE_START_AT
                                                    , NIGHT_CARE_END_AT
                                                    , HOSPITAL)
        values (#{mondayOperatingEnable}
                , #{mondayOperatingStartAt}
                , #{mondayOperatingEndAt}
                , #{mondayBreakStartAt}
                , #{mondayBreakEndAt}
                , #{mondayNightCareEnable}
                , #{mondayNightCareStartAt}
                , #{mondayNightCareEndAt}
                , #{HOSPITAL})
    </insert>

    <insert id="insertHospitalOperatingHourTuesday">
        INSERT INTO HOSPITAL_BUSINESS_HOURS_TUESDAY (ENABLE
                                                    , START_AT
                                                    , END_AT
                                                    , BREAK_START_AT
                                                    , BREAK_END_AT
                                                    , NIGHT_CARE_ENABLE
                                                    , NIGHT_CARE_START_AT
                                                    , NIGHT_CARE_END_AT
                                                    , HOSPITAL)
        values (#{tuesdayOperatingEnable}
               , #{tuesdayOperatingStartAt}
               , #{tuesdayOperatingEndAt}
               , #{tuesdayBreakStartAt}
               , #{tuesdayBreakEndAt}
               , #{tuesdayNightCareEnable}
               , #{tuesdayNightCareStartAt}
               , #{tuesdayNightCareEndAt}
               , #{HOSPITAL})
    </insert>

    <insert id="insertHospitalOperatingHourWednesday">
        INSERT INTO HOSPITAL_BUSINESS_HOURS_WEDNESDAY (ENABLE
                                                    , START_AT
                                                    , END_AT
                                                    , BREAK_START_AT
                                                    , BREAK_END_AT
                                                    , NIGHT_CARE_ENABLE
                                                    , NIGHT_CARE_START_AT
                                                    , NIGHT_CARE_END_AT
                                                    , HOSPITAL)
        values (#{wednesdayOperatingEnable}
                , #{wednesdayOperatingStartAt}
                , #{wednesdayOperatingEndAt}
                , #{wednesdayBreakStartAt}
                , #{wednesdayBreakEndAt}
                , #{wednesdayNightCareEnable}
                , #{wednesdayNightCareStartAt}
                , #{wednesdayNightCareEndAt}
                , #{HOSPITAL})
    </insert>

    <insert id="insertHospitalOperatingHourThursday">
        INSERT INTO HOSPITAL_BUSINESS_HOURS_THURSDAY (ENABLE
                                                    , START_AT
                                                    , END_AT
                                                    , BREAK_START_AT
                                                    , BREAK_END_AT
                                                    , NIGHT_CARE_ENABLE
                                                    , NIGHT_CARE_START_AT
                                                    , NIGHT_CARE_END_AT
                                                    , HOSPITAL)
        values (#{thursdayOperatingEnable}
                , #{thursdayOperatingStartAt}
                , #{thursdayOperatingEndAt}
                , #{thursdayBreakStartAt}
                , #{thursdayBreakEndAt}
                , #{thursdayNightCareEnable}
                , #{thursdayNightCareStartAt}
                , #{thursdayNightCareEndAt}
                , #{HOSPITAL})
    </insert>

    <insert id="insertHospitalOperatingHourFriday">
        INSERT INTO HOSPITAL_BUSINESS_HOURS_FRIDAY (ENABLE
                                                    , START_AT
                                                    , END_AT
                                                    , BREAK_START_AT
                                                    , BREAK_END_AT
                                                    , NIGHT_CARE_ENABLE
                                                    , NIGHT_CARE_START_AT
                                                    , NIGHT_CARE_END_AT
                                                    , HOSPITAL)
        values (#{fridayOperatingEnable}
                , #{fridayOperatingStartAt}
                , #{fridayOperatingEndAt}
                , #{fridayBreakStartAt}
                , #{fridayBreakEndAt}
                , #{fridayNightCareEnable}
                , #{fridayNightCareStartAt}
                , #{fridayNightCareEndAt}
                , #{HOSPITAL})
    </insert>

    <insert id="insertHospitalOperatingHourSaturday">
        INSERT INTO HOSPITAL_BUSINESS_HOURS_SATURDAY (ENABLE
                                                    , START_AT
                                                    , END_AT
                                                    , BREAK_START_AT
                                                    , BREAK_END_AT
                                                    , NIGHT_CARE_ENABLE
                                                    , NIGHT_CARE_START_AT
                                                    , NIGHT_CARE_END_AT
                                                    , HOSPITAL)
        values (#{saturdayOperatingEnable}
                , #{saturdayOperatingStartAt}
                , #{saturdayOperatingEndAt}
                , #{saturdayBreakStartAt}
                , #{saturdayBreakEndAt}
                , #{saturdayNightCareEnable}
                , #{saturdayNightCareStartAt}
                , #{saturdayNightCareEndAt}
                , #{HOSPITAL})
    </insert>

    <insert id="insertHospitalOperatingHourSunday">
        INSERT INTO HOSPITAL_BUSINESS_HOURS_SUNDAY (ENABLE
                                                    , START_AT
                                                    , END_AT
                                                    , BREAK_START_AT
                                                    , BREAK_END_AT
                                                    , NIGHT_CARE_ENABLE
                                                    , NIGHT_CARE_START_AT
                                                    , NIGHT_CARE_END_AT
                                                    , HOSPITAL)
        values (#{sundayOperatingEnable}
                , #{sundayOperatingStartAt}
                , #{sundayOperatingEndAt}
                , #{sundayBreakStartAt}
                , #{sundayBreakEndAt}
                , #{sundayNightCareEnable}
                , #{sundayNightCareStartAt}
                , #{sundayNightCareEndAt}
                , #{HOSPITAL})
    </insert>

    <!--기획이 완성되지 않아 LIST에서 1개만 추출함-->
    <select id="findHospitalList" resultType="HashMap">
        SELECT SEQ
             , NAME
             , ADDRESS
             , COORDINATE
             , CONTACT
             , USER
        FROM HOSPITAL
        ORDER BY SEQ DESC
        LIMIT 1
    </select>

    <select id="findHospitalByUser" resultType="Integer">
        SELECT USER
        FROM HOSPITAL
        WHERE HOSPITAL = #{hospital}
    </select>

    <update id="updateHospitalInfo">
        UPDATE HOSPITAL_INFO
        SET  INFO_SIMPLE = #{simple}
          ,  INFO_DETAILS = #{details}
          ,  INFO_PARKING = #{parking}
        WHERE HOSPITAL = #{hospital}
    </update>

    <update id="updateUserHospitalHost">
        UPDATE USER_HOSPITAL_RELATE
        SET    USER = #{user}
        WHERE HOSPITAL = #{hospital}
    </update>

    <update id="updateHospitalChief">
        UPDATE HOSPITAL_CHIEF
        SET    CHIEF_NAME = #{chiefName}
        ,      LICENSE_NUMBER = #{licenseNumber}
        ,      CHIEF_CATEGORY = #{chiefCategory}
        ,      SEX = #{gender}
        WHERE HOSPITAL = #{hospital}
    </update>

    <update id="updateHospital">
        UPDATE HOSPITAL
        SET    NAME = #{name}
          ,  ADDRESS = #{address}
          ,  COORDINATE = POINT(${coordinate})
          ,  CONTACT = #{contact}
          ,  USER = #{user}
        WHERE SEQ = #{hospital}
    </update>

    <insert id="insertHospitalInfo">
        INSERT INTO HOSPITAL_INFO (HOSPITAL, INFO_SIMPLE, INFO_DETAILS, INFO_PARKING)
        values (#{HOSPITAL}, #{simple}, #{details}, #{parking})
    </insert>

    <insert id="insertUserHospitalHost">
        INSERT INTO USER_HOSPITAL_RELATE (USER, HOSPITAL, HOST)
        values (#{seq}, #{HOSPITAL}, true)
    </insert>

    <insert id="insertHospitalChief">
        INSERT INTO HOSPITAL_CHIEF (CHIEF_NAME, LICENSE_NUMBER, CHIEF_CATEGORY, SEX, HOSPITAL)
        values (#{chiefName}, #{licenseNumber}, #{chiefCategory}, #{gender}, #{HOSPITAL})
    </insert>

    <insert id="insertHospital" useGeneratedKeys="true" keyProperty="HOSPITAL" keyColumn="SEQ">
        INSERT INTO HOSPITAL (NAME, ADDRESS, COORDINATE, CONTACT, USER)
        values (#{name}, #{address}, POINT(${coordinate}), #{contact}, #{seq})
    </insert>

    <insert id="insertHospitalVisitReserveInfo">
        INSERT INTO HOSPITAL_VISIT_RESERVE_INFO (ENABLE, START_AT, END_AT, CANCELLATION_PERIOD, RESERVE_PER_HOUR, WEEKEND, HOSPITAL)
        values (#{visitReserveEnable}, #{visitReserveStartAt}, #{visitReserveEndAt}, #{visitReserveCancellationPeriod}, #{visitReserveRerHour},
                #{visitReserveWeekend}, #{HOSPITAL})
    </insert>

    <insert id="insertHospitalConsultationReserveInfo">
        INSERT INTO HOSPITAL_CONSULTATION_RESERVE_INFO (ENABLE, START_AT, END_AT, CANCELLATION_PERIOD, RESERVE_PER_HOUR, WEEKEND, HOSPITAL)
        values (#{consultationReserveEnable}, #{consultationReserveStartAt}, #{consultationReserveEndAt}, #{consultationReserveCancellationPeriod}, #{consultationReserveRerHour},
                #{consultationReserveWeekend}, #{HOSPITAL})
    </insert>

    <insert id="insertHospitalOnlineReserveInfo">
        INSERT INTO HOSPITAL_ONLINE_RESERVE_INFO (ENABLE, START_AT, END_AT, CANCELLATION_PERIOD, RESERVE_PER_HOUR, WEEKEND, HOSPITAL)
        values (#{onlineReserveEnable}, #{onlineReserveStartAt}, #{onlineReserveEndAt}, #{onlineReserveCancellationPeriod}, #{onlineReserveRerHour},
                #{onlineReserveWeekend}, #{HOSPITAL})
    </insert>

    <insert id="insertHospitalHouseCallReserveInfo">
        INSERT INTO HOSPITAL_HOUSE_CALL_RESERVE_INFO (ENABLE, START_AT, END_AT, CANCELLATION_PERIOD, RESERVE_PER_HOUR, WEEKEND, HOSPITAL)
        values (#{houseCallReserveEnable}, #{houseCallReserveStartAt}, #{houseCallReserveEndAt}, #{houseCallReserveCancellationPeriod}, #{houseCallReserveRerHour},
                #{houseCallReserveWeekend}, #{HOSPITAL})
    </insert>

    <update id="=updateHospitalVisitReserveInfo">
        UPDATE HOSPITAL_VISIT_RESERVE_INFO
        SET    ENABLE = #{visitReserveEnable},
               START_AT = #{visitReserveStartAt},
               END_AT = #{visitReserveEndAt},
               CANCELLATION_PERIOD = #{visitReserveCancellationPeriod},
               RESERVE_PER_HOUR = #{visitReserveRerHour},
               WEEKEND = #{visitReserveWeekend}
        WHERE HOSPITAL = #{hospital}
    </update>

    <update id="=updateHospitalConsultationReserveInfo">
        UPDATE HOSPITAL_CONSULTATION_RESERVE_INFO
        SET    ENABLE = #{consultationReserveEnable},
               START_AT = #{consultationReserveStartAt},
               END_AT = #{consultationReserveEndAt},
               CANCELLATION_PERIOD = #{consultationReserveCancellationPeriod},
               RESERVE_PER_HOUR = #{consultationReserveRerHour},
               WEEKEND = #{consultationReserveWeekend}
        WHERE HOSPITAL = #{hospital}
    </update>

    <update id="=updateHospitalOnlineReserveInfo">
        UPDATE HOSPITAL_ONLINE_RESERVE_INFO
        SET    ENABLE = #{onlineReserveEnable},
               START_AT = #{onlineReserveStartAt},
               END_AT = #{onlineReserveEndAt},
               CANCELLATION_PERIOD = #{onlineReserveCancellationPeriod},
               RESERVE_PER_HOUR = #{onlineReserveRerHour},
               WEEKEND = #{onlineReserveWeekend}
        WHERE HOSPITAL = #{hospital}
    </update>

    <update id="=updateHospitalHouseCallReserveInfo">
        UPDATE HOSPITAL_HOUSE_CALL_RESERVE_INFO
        SET    ENABLE = #{houseCallReserveEnable},
               START_AT = #{houseCallReserveStartAt},
               END_AT = #{houseCallReserveEndAt},
               CANCELLATION_PERIOD = #{houseCallReserveCancellationPeriod},
               RESERVE_PER_HOUR = #{houseCallReserveRerHour},
               WEEKEND = #{houseCallReserveWeekend}
        WHERE HOSPITAL = #{hospital}
    </update>


</mapper>