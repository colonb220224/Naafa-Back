CREATE SCHEMA IF NOT EXISTS NAAFA;

CREATE TABLE IF NOT EXISTS USER
(
    SEQ       BIGINT AUTO_INCREMENT PRIMARY KEY,
    USERNAME  VARCHAR(50) UNIQUE                        NOT NULL,
    PASSWORD  TEXT                                      NULL,
    ROLE      ENUM ('ROLE_USER','ROLE_ADMIN')           NOT NULL DEFAULT 'ROLE_USER',
    PROVIDER  ENUM ('DEFAULT','KAKAO','GOOGLE','NAVER') NOT NULL DEFAULT 'DEFAULT',
    SOCIAL_ID TEXT                                      NULL
);

CREATE TABLE IF NOT EXISTS HOSPITAL
(
    SEQ     BIGINT AUTO_INCREMENT PRIMARY KEY,
    NAME    TEXT   NOT NULL,
    ADDRESS TEXT   NOT NULL,
    PLACE   POINT  NOT NULL,
    CONTACT TEXT   NOT NULL,
    USER    BIGINT NOT NULL,
    FOREIGN KEY (USER) REFERENCES USER (SEQ)
);

CREATE TABLE IF NOT EXISTS HOSPITAL_CHIEF
(
    SEQ            BIGINT AUTO_INCREMENT PRIMARY KEY,
    CHIEF_NAME     TEXT                          NOT NULL,
    LICENSE_NUMBER TEXT                          NOT NULL,
    CHIEF_CATEGORY ENUM ('GENERAL','SPECIALIST') NOT NULL,
    SEX            ENUM ('MALE','FEMALE')        NOT NULL
);

CREATE TABLE IF NOT EXISTS HOSPITAL_HOST
(
    SEQ      BIGINT AUTO_INCREMENT PRIMARY KEY,
    USER     BIGINT NOT NULL,
    HOSPITAL BIGINT NOT NULL,
    FOREIGN KEY (USER) REFERENCES USER (SEQ),
    FOREIGN KEY (HOSPITAL) REFERENCES HOSPITAL (SEQ)
);